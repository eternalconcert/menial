<!DOCTYPE html>
<html>
    <head>
        <title>menial: Always at your service!</title>
        <link rel="icon" href="/static/favicon.png" type="image/png" />
        <link rel="stylesheet" type="text/css" href="/style/main.css">
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    </head>

    <body>
        <div id="main">
            <h1><a href="/">menial</a></h1>
            <p id="claim">
                Always at your service!
            </p>
            <h2>Help</h2>
            <h3>Content</h3>
            <ul id="content-table">
                <li class="content-table-main">
                    <a href="#config">Configuration</a>
                </li>
                <li class="content-table-sub">
                    <a href="#config-basic">Basic</a>
                </li>
                <li class="content-table-sub">
                    <a href="#config-directives">Directives</a>
                </li>
                <li class="content-table-sub">
                    <a href="#config-custom-config">Custom config</a>
                </li>
            </ul>

            <h2 id="config">Configuration</h2>
            <h3 id="config-basic">Basic</h3>
            <p>
                You can find the default config file in the root installation folder of your menial installation. It contains all configuration directives you need to customize menial.
            </p>
            <p>
                The content is in the JSON format and has the following structure:
            </p>
            <pre class="prettyprint lang-python prettyprinted">
                {
                    "hosts": {
                        "*:80": {
                            "responder": "file",
                            "root": "default/",
                            "errorpagesdir": "default/errorpages/"
                        }
                    },
                    "loglevel": "debug",
                    "logfilepath": "/tmp/",
                    "logger": "console"
                }
            </pre>
            <h3 id="config-directives">Directives</h3>
            <p>
                <ul>
                    <li>
                        <b>hosts:</b> A dictionary which contains a key for each virtual host.
                        <ul>
                            <li>
                                <b>*:80:</b> The * represents the hostname and the 80 the port. You can also use a specific hostname if your server has multiple hostnames or if you need to use subdomains.
                                <br>
                                Example: sub.localhost:8080
                                <br>
                                The value is a dictionary which contains the host specific configuration.
                            </li>
                            <ul>

                            <li>
                                <b>responder:</b> The responder is used to specify the request handler. Default is "file", which means, static content will be delivered. There are other types of responders, like "python".
                            </li>
                            <li>
                                <b>root:</b> The document root folder. When the responder is set to "file", the content of the document root will be delivered.
                            </li>
                            <li>
                                <b>errorpagesdir:</b> The directory where the error pages like 404 are stored. These will be delivere when the responder is "file". You can use the default value if you are happy with minmalistic error pages. Otherwise you can customize the default files or create your own. The must be named in the following way: http_error_code.html
                                <br>
                                Example: 404.html
                            </li>
                            </ul>
                        </ul>
                    </li>
                    <li>
                        <b>loglevel:</b> The level of priority of log messages. Choices are:<br>
                        - debug: The most verbose level. For development and debug purposes.<br>
                        - info: Still a verbose level. For normal use.<br>
                        - warning: Shows only messages which contain warnings.<br>
                        - error: Messages are only logged when they were caused by an error.<br>
                        - critical: When things go really bad, this level kicks in.<br>
                        Each level shows the messages of its own level and the message of the from the following levels.<br>
                        All other option will supress every logging. So be careful when you change the level to another value.

                    </li>
                    <li>
                        <b>logfilepath:</b> Folder to store log files in.
                    </li>
                    <li>
                        <b>logger:</b> Specifies the logger. Loggers are "console" or "file". "console" prints the log entries to the console and "file" creates a "menial.log" in the "logfilepath".
                    </li>
                 </ul>
            </p>
            <p>
                You can add a lot of hosts to the config. If you do so, you need to configure each hosts responder, root and errorpagesdir. The other configuration directives (loglevel, logfilepath and logger) are global.
            </p>
            <p>
                A more sophisticated example:
            </p>
            <pre>
                {
                    "hosts": {
                        "*:80": {
                            "responder": "file",
                            "root": "/var/www/html/myhomepage/",
                            "errorpagesdir": "/etc/menial/errorpages/"
                        }
                        "myfriend:80": {
                            "responder": "file",
                            "root": "/var/www/html/myfriendshomepage/",
                            "errorpagesdir": "/etc/menial/errorpages/"
                        },
                        "myfriendscousin:80": {
                            "responder": "file",
                            "root": "/var/www/html/myfriendscousinshomepage/"
                            "errorpagesdir": "/etc/menial/errorpages/"
                        },
                        "*:8000": {
                            "responder": "python",
                            "root": "pyresponse.py",
                            "errorpagesdir": "/can/be/blank/because/python/must/handle/errors/"
                        }
                    },
                    "loglevel": "info",
                    "logfilepath": "/var/log/menial/",
                    "logger": "file"
                }
            </pre>
            <h3 id="config-custom-config">Custom config</h3>
                When you run menial you need to pass the location to the config file as first parameter.<br>
                You can create your own config file (e.g. copying the exsting one) and save it at any accessible locatation. Handover the new file to menial on startup.
        </div>
        <div id=footer>
            Licensed under <br /> <a href="https://www.gnu.org/licenses/gpl.html">
            <image src="/static/gplv3-127x51.png" width="100" /></a>
        </div>
    </body>
</html>
